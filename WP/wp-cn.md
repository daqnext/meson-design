## 下一代流式加速网络
# 摘要

随着互联网的发展，视频、直播、短视频等流媒体进入主流视线并迅速增长，越来越多的人把娱乐及消费时间放到流媒体上，而受 2020 年疫情影响，大众对线上娱乐生活的诉求更甚从前。以抖音为代表的短视频平台在 2020年8月的日活已超 6 亿，Netflix 全球订阅用户数在 2020年3月末已突破 1.8 亿，Taobao 顶流直播带货创造了过亿在线记录。如此庞大的流媒体需求，背后不为人所知的是高额的带宽费用。

为了保证各地用户的访问体验，传统企业会使用*内容分发网络*来加速内容，亚马逊早年曾报道其网页每多 1s 的访问时间，需要在销售端多支出 $1.6Billion。而在流媒体时代，用户对内容端的体验更敏感，传输数据的体量是过去的数十倍甚至数百倍，视频的清晰度要求也越来越高。据招股书数据，短视频里头部企业 Kuaishou 在 2020 年上半年支付带宽及服务器费用 25.19亿元，新一代视频加速市场随着各类流媒体的兴起而爆发增长中。

与此同时，全球范围内有大量的服务器带宽处于闲置状态。相比计算资源的复杂性，带宽相对容易标准化且市场对于利用带宽的加速服务有巨大需求。基于此，我们提出 "Meson Network"，以极低的准入门槛让通用服务器能参与挖矿，通过区块链技术聚合并利用闲散服务器资源，降低企业使用加速服务成本。

# 背景

TikTok、Youtube、Instagram、Twitch、Netflix 等这类视频、直播类媒体，极大的丰富了现代人线上娱乐生活。以其中增长最为迅猛的短视频平台 TikTok 为例：2018年10月，TikTok在美国的下载量开始超越 Facebook、Instagram、Snapchat和YouTube。据Priori Data数据，截至2019年11月，TikTok在美国的下载量已达4100万。2020年一开局，疫情突如其来，在外出需求普遍下降的大背景下，包含短视频在内的线上泛娱乐应用流量皆增，TikTok的增长因此又添了一把火。据 Sensor Tower数据，2020年1月，TikTok以770万次安装量获得美国地区非游戏应用下载榜第一，与去年同期相比增长28.3%；2月份 TikTok 依然是全球下载量最高的非游戏应用，美国下载量为640万次；3月TikTok用户总使用时长突破6亿小时。在整个一季度，TikTok 在 iOS 和 Google Play 的总下载量达到了3.15亿次，超过所有应用的历史记录。

在 2020年8月，抖音给出数据表明，其日活已超 6 亿，如此大的体量，其背后付出的流量费用是比不小的开支。参考其中国竞争对手 Kuaishou 于 2020 年 11 月向港交所提交的招股书

![图片](https://uploader.shimo.im/f/pBFBOuRsXjBICtQM.png!thumbnail)

注意到，Kuaishou 在中国区日活已超 3 亿，其 2020 年上半年支付的带宽及服务托管开销超过 25.19 亿元，同比增长 110%。除了短视频，直播行业的发展也异常快速。以 Taobao 为典型例子的电商带货直播，其顶流在双十一活动期间创造了过亿的在线用户数，Twitch、Douyu 等直播平台每年也需支付大量带宽使用费用。因此，流媒体为代表的大量应用正在全球范围内流行，而这些保证用户体验的高额带宽费用付给了全球各家*内容**加速*厂商。

# Introduction toContent DeliveryNetwork

### 什么是内容分发网络

为了解决互联网上越来越多内容的传输、存储、分发等问题，提供给终端用户更好的访问和使用体验，内容分发网络便是一个高性价比，操作便捷，快速实现的解决方案。其在现有 Internet 中增加一层新的网络架构，由遍布全国的加速节点构成。这些服务节点都会按照一定的缓存策略存储您的业务内容，当您的用户向您的某一业务内容发起请求时，请求会被调度至最接近用户的服务节点，直接由服务节点快速响应，有效降低用户访问延迟，提升可用性。

### 为什么使用内容分发网络

#### 提高访问速度

多数企业只部署服务器在少数区域，而各地网络情况复杂，全球网络情况更复杂，少数节点处理请求的质量难以保证。而现代互联网企业提供的服务是面向全国甚至全世界，用户访问终端距离企业的服务器距离越远，信息传输所要花费的时间就越长，网络不确定性也越高。节点在世界多地部署并缓存数据，可以较好的处理大部分复杂的网络情况，对提升访问速度有很大帮助。

#### 降低网络使用成本

使用此方案，可以省下大量网络费用和人员研发投入。

#### 扛攻击

企业如果贸然把服务器源 IP 地址暴露给终端用户，极易遭到攻击（如 DDoS）损害到业务的稳定和安全性。使用该网络则可以隐藏源地址，起到保护的作用。

### 市场现状及增长

注意到现已是数百亿美元的市场，并以极快的速度增长。

![图片](https://uploader.shimo.im/f/6lcrZ2tUNGZWCo3F.png!thumbnail)

[https://www.t4.ai/industry/cdn-market-share](https://www.t4.ai/industry/cdn-market-share)![图片](https://uploader.shimo.im/f/4uyHfPYGrZNVXOz5.png!thumbnail)

[https://www.statista.com/statistics/267184/content-delivery-network-internet-traffic-worldwide/](https://www.statista.com/statistics/267184/content-delivery-network-internet-traffic-worldwide/)

据相关调研数据显示，到 2022 年内容分发网络将会承载 72% 以上的互联网流量，远高于2017年的 56% 并将处理更多接近终端用户的流量。同时伴随着 5G 等新基建及工业互联网、物联网的发展，EDN 也将不断扩大接入体量，借助稳定的内容分发及边缘节点产品，服务更多用户。

# Meson  解决的问题

### 打破巨头垄断

现今多数企业都需要内容加速服务，像AWS、Cloudflare、Akamai这类提供此类服务的头部公司市值已超百亿美元，而视频等流媒体的爆发趋势已确立，未来对于流媒体加速的需求只会越来越大。但注意到，很多时候企业用户对于加速服务提供商的选择余地不多，市场早已被定价，利润被几大巨头所瓜分。从供给角度来看，不少用户能提供和巨头相同质量的网络资源及硬件配置，市场的利润被垄断下放，体量未到一定量级也难以和巨头合作，所以存在不少比例的机器找不到较好的变现途。Meson 提供一个打破巨头垄断的网络。一端为用户接入网络提供标准，另一端把被巨头垄断的利润释放出来。

### 沉没成本变现

在所有计算机资源中，通用服务器是最常见的资源，全球范围内开发者/学校/机构/企业都有大量的通用服务器。这类机器不同于传统数字货币矿机(ETH,BTC)在应用层面的局限性，各地机房已大量部署和使用。但放眼全球，其中不少比例的资源无法被充分利用，并难以寻求到一个合理的变现渠道。Meson可以被广泛部署于现有的通用服务上，实现让人人都能一键部署挖矿。Meson 通过挖矿把现有的海量通用服务器集中利用，降低了消费者成本同时也让参与挖矿者获得收益。

### 触及长尾用户

不少终端用户、商家自持或租用中心机房的服务器，虽然相关配置符合要求，但由于体量及渠道问题，巨头不愿投入销售人力成本与其合作。而若把这类用户聚合，对巨头则充满吸引力。鉴于此，Meson 使用代币激励的方式来获取这类用户，不投入巨大的人力销售成本，反之使用自发激励的模式让长尾市场加入网络。

### 区块链商业闭环的缺失

注意到现有区块链世界里，不少项目虽然短时间内炒作热度很高，但往往没多久就归于平静甚至消失。分析原因发现，多为商业模式无法闭环，只靠不断的击鼓传花让后来者为先行者买单。而 Meson 恰恰相反，本身具有商业价值及变现能力，随着网络的不断扩大形成大量盈利。另一方面，区块链过往的发展和实践证明其是一种非常好的设计，合理的使用能解决现有的问题并创造巨大的价值。因此，Meson 使用代币来完成经济的激励，驱动终端用户加入及更好的发展网络。网络服务全球加速市场，由此形成的利润回哺代币的持有者并进一步激励网络，最终实现一种可持续的发展模式。

# Meson

### 设计哲学

对于Meson的设计，应遵循以下几条原则：

1. **简洁**：架构及通信应尽可能的简单，即使平均水平的工程师也能较好实现定义的规范，并践行把协议向更多人开放。除非必要的益处，不添加会引入过多复杂性的优化方案。
2. **开放**：协议本身不做任何限制，任何遵从协议的终端都可加入网路。网络行为本身也不受限制，用户可以使用大量的资源只要为此付出协议规定里的费用。
3. **模块化**：Meson里的设计，应尽可能模块化，解耦。
4. **易用**：对于加入网络的终端用户，应提供简洁的使用方式，例如 windows 双击一个程序，linux 下运行一行指令。同时要提供直观的收益展示页面，用户友好是重要宗旨。
### 网络角色

定义网络里存在的几种角色及作用

* Terminal：加入meson网络的终端节点，存储数据并提供服务响应，同时获取收益。
* Router：负责分配和调度网络请求。
* Hunter：负责寻找 Terminal 漏洞的赏金猎人，通过伪装成真实请求来探测 Terminal 的可靠和完整性。将有问题的 Terminal 及信息提交议会，待核实后，获取高额报酬。
* 议会：负责治理。
* Client：普通的互联网用户
* Bussiness User: 对网络加速有需求的客户
### 协议和消息

Terminal 的核心功能是完成数据缓存、删除和响应服务，并需要提供心跳包及本地配置信息来确保 Core 能感知到 Terminal 的存在。除此之外，如果因各种因素导致 Terminal 宕机，则在重启的时候需要自检校验文件的完整性并上报。由于设计里对 Terminal 的代码开源，存在作恶可能，因此还需要对数据及传输做抽查和校验。

鉴于如上功能,Terminal需含以下最简单的几种协议：

* save/cache file(s)（originURL, verified hash, TTL）
* delete file（file hash）
* get file (file hash）
* heartbeat
* hardware configuration
* index of local cached files
* shards spot check
### 传输验证

网络的关键是传输加速，在系统总资源一定的情况下，希望 Terminal 尽可能多的缓存文件，并把访问频率高的文件缓存到离请求方更近的位置。Terminal 启动后会开始缓存文件，在达到一定阈值则需删除访问频率比较低的文件。删除的操作可以由 Terminal 来主动发起，并由调度端做确认回复，也可以由控制端直接调度。控制端在分配缓存任务时，需要知道 Terminal 剩余存储空间及是否有能力来继续缓存文件，以此来优化网络效率。

由于 Terminal 代码开源，用户存在作恶的可能，因此需要做传输验证，Meson采用抽查和赏金猎人的模式来操作。对于用户的作恶行为，大致可以分成两类：修改数据和未存储对应数据。对于修改数据的作恶行为，在调度模块有做数据源的哈希校验并随机存储了部分分片的数据。系统会按一定比例和权重抽查 Terminal 当前存储的数据，如果发现用户返回数据结果和现存数据不符，则做处罚处理。对未存储数据的行为，一方面系统随机抽查，另一方面也引入了赏金猎人的角色。Hunter 在请求 Terminal 服务时，如果发现有存储缺失或者损害，则可直接向议会提交信息，待验证后获取收益。若 Terminal 被发现作恶，则罚没代币并按一定比例分配到发现作弊方，以此来激励角色寻找网络里不安定因素。

### 可靠性和冗余

加速网络的一大特征是它能够在遭遇常见网络问题（包括硬件故障和网络拥塞）时保持网站内容在线。通过对 Internet 流量进行负载均衡，使用智能故障转移以及跨许多数据中心维护服务器，该设计可以避免网络拥塞并且抵御服务中断。

在数据中心中使用负载均衡将传入请求分散到可用的服务器池中，以确保以最有效的方式应对流量高峰。通过高效使用可用资源，负载均衡能够提高处理速度并有效利用服务器容量。妥善均衡传入流量的负载是缓解非典型 Internet 活动期间（例如，网站遇到异常多的访问者时，或者发生分布式拒绝服务攻击时）流量高峰的关键组成部分。利用负载均衡，还在服务器资源的供应上下波动时快速有效地做出更改。如果服务器出现故障并发生故障转移，则负载均衡器将重定向分配给故障服务器的流量，并将其按比例分散到其余的服务器。这可以增加硬件故障不中断流量的可能性，从而提供弹性和可靠性。数据中心中有新的服务器联机时，负载均衡器将按比例卸除其他服务器的负载，并提高新硬件的利用率。借助基于软件的负载均衡服务，可以快速扩展负载平衡容量，而不会遇到使用物理负载平衡硬件时的瓶颈。

使用 Anycast 路由方法，将 Internet 流量传输到特定的可用 Terminal。这是为了确保缩短响应时间，并防止任何一个 Terminal 在发生 DDoS 攻击等异常需求时变得不堪重负。借助 Anycast 技术，多台机器可以共享同一个 IP 地址。当请求发送到 Anycast IP 地址时，路由器会将其定向到最近网络上的机器。如果整个网络发生故障或因其他原因而无力应对大量通信，Anycast 网络可以对服务中断做出响应，这类似于负载均衡器在跨多台服务器传输通信；数据从故障位置转移走，路由到仍然在线并可正常运作的另一个 Terminal。

### 经济治理模型

#### 代币激励

Meson使用区块链代币来做激励。在之前 Bittorrent 网络里，用户贡献自己的上传带宽来获得更好的下载速度，但很多时候，下载完成就从网络中退出（关闭软件）。此时网络其实处于空闲状态，但用户不会继续处于处于网络中，因为已经没有下载需求，换句话说，没有激励。这里的问题在于早期 BitTorrent 网络是同类资源的交换，用户想下载就要用更多的上传来换，而如果把交换对象修改成非同类资源，甚至通用货币，那事情就会变得有趣许多。

把代币分发给加入网络的 Terminal 作为提供资源的回报，用户可以根据硬件情况衡量当前加入网络的回报。Hunter 角色去不断寻找网络里的作弊行为受到鼓励，如果 Hunter 发现有不合理行为，则可提交议会并为此质押一定的代币。如若证实，Hunter 获取奖励，Terminal 处罚；反之，则 Hunter 质押代币被扣除。考虑采用 DAO 治理的模式，持有代币可以发起提案和参与投票，包括加入议会及参与收益分红。

主要利润在链下产生，用户使用加速服务并为此支付费用。终端节点由于本身是沉没成本，所以成本可以相对较低，由此形成合理的利润空间。又因做的是协议层面的统一，用户可以自发加入，易于形成超大规模的分布式加速网络，网络的效应和节点数的平方成正比，因此整个生态的增长会非常迅速。终端节点由于有代币的激励，自发加入网络，节点越多网络价值越大，用户也更愿意为使用该网络而支持费用，控制方则把使用网络方支付的费用转移到链上，来回购和销毁发行的代币，最后形成整个经济的正向激励和统一。

#### 治理模型

为了保证网络的不断演进及更好的发展，Meson允许其代币持有者通过投票来修改协议。要注意的是，不只是代币持有者，任何人都可以提交提议来发起代币投票。

对协议变量的更改在通过投票批准之后是不太可能立即生效的。如果投票者选择立即启动治理结果，这些更改就会被推迟激活（推迟最多 24 小时）。这段时间给了代币持有者行动的机会，如有必要，可触发关停机制，来反对恶意的治理提议（例如，大幅修改收益分配比例来损害用户利益）。

议会在网络中承担着维护秩序的作用。议会成员在 Trusted Executive Environment(TEE) 中运行验证代码，并处理 Hunter 提交的检测请求及进行最后的判罚操作。进入议会的成员需要被投票产生并质押代币，所有提案执行过程，由议会进行监督并设置奖惩。

### 服务对象和商业目标

1.1 商业服务对象包括所有中小型和大型互联网企业

任何互联网企业或者团体，需要加速服务来保证好的用户体验，而 Amazon 的例子(How One Second Could Cost Amazon $1.6 Billion In Sales[link])表明访问延迟可能使企业付出不小的代价。因此，对于这类群体 Meson 的商业目标是

1.1.1 极稳定的全球加速,

1.1.2 极高速的全球加速

1.1.3 极低的全球使用价格

1.1.4 无需安装SDK或者任何终端,一键接入

### 和 Filecoin 的比较

Filecoin 提出了一种存储数据的方案，但由于官方的设计路线过于重视加密算法而忽略了商业盈利的本质，这样的设计导致实际使用存储的成本远远高于第三方如AWS的存储价格，从而本质上无法形成商业竞争力和盈利闭环，无法被大规模的用于商业。而Meson本质上不是为了服务于文件存储而是服务于文件加速，加速服务相比之下，有更大的商业价值。Meson从开始设计之初的目标就是要形成商业盈利闭环，实际使用价格要远低于传统的加速服务厂商。经济模型和利用分布式传输的方式，实质上是为服务切实的商业盈利。

### 和 BitTorrent 的比较

BitTorrent 是基于传统的 P2P 客户端的一种传输方式，其主要以家庭带宽为主的用户，这种传输需要借助用户安装客户端，使用者也需要安装客户端或者SDK。由于所有网络节点都是基于家用客户端，会造成网络一定程度的加速不稳定性。商业用户未有使用这种服务主要是由于集成SDK的非通用性，以及不稳定性的诸多考虑。所以 BitTorrent 本质上是基于 P2P 家用网络的一种半存储半加速的网络。

除此之外，原生的 BitTorrent 网络在激励层面存在问题。由于只是同类资源的互换（贡献上行带宽来获得下行加速），大量用户在完成自身下载任务后，没有足够动力继续为网络提供服务，造成整体不确定性变大。

Meson借鉴了 BitTorrent 的优势也看到了 BitTorrent 的诸多问题，Meson聚积了闲置服务器资源，提出了下一代分布式加速协议方案并使用更合理的激励模型，兼具廉价和高稳定高速度的优势。

# 应用场景

### 大规模商用加速服务

早期数据中心用户由于代币的激励加入网络，并出于是沉没成本的变现，能以低成本提供相对优质的服务，而需求方于成本等因素的考量开始逐步使用网络并支付费用。把收到的费用回购代币后，强化了激励作用，更多的用户开始加入网络。平方增长的效应使得网络更具有价值进而吸引了更多需求方使用网络并产生收益并回哺节点。

### 边缘节点接入

5G 等基础设施的普及，由于低延时、大带宽这两个特质，大量的边缘节点可作为加速服务提供终端。物联网设备（IoT）甚至终端手机都可以遵从我们的协议加入网络并获取收益，形成大规模分布式加速网络。

### 闲置资源接入

闲置带宽合理的变现途径。

# 结论

正处于不断进步和变革的大时代，大量事物信息和数据化，对于网络质量的要求越来越高。而网络服务终端用户的体验，成为许多公司重点投入的部分，加速网络首当其冲。但同时也注意到许多中心化厂商的解决方案不仅成本较高，稳定性也层次不齐。而随着现有终端节点数据处理能力、网络及存储等方面的提升，建立新一代加速网络的基础条件逐步成熟。由于终端节点的功能各有不同：应对峰值流量、做冗余、测试、闲置，造成其成本也有许多差异。因此，希望能制定一套协议，让广大用户可以自主选择加入网络并使用代币的模型来激励用户。由于网络是分布式且成本由终端节点自行评判，所以可以提供一个价格相对更合理并且架构上更可靠的服务网络。而市场的迅速增长则可以给网络带来巨大的正向激励，形成可靠的商业模式并最终更好服务用户。

# 参考文献

* [https://www.cloudflare.com/resources/images/slt3lc6tev37/6mpY5zjlPP3b2twznUQOki/b221bc7b49723deb2c09a4b30747f685/cloudflare-cdn-whitepaper-19Q4.pdf](https://www.cloudflare.com/resources/images/slt3lc6tev37/6mpY5zjlPP3b2twznUQOki/b221bc7b49723deb2c09a4b30747f685/cloudflare-cdn-whitepaper-19Q4.pdf)
* [https://filecoin.io/filecoin.pdf](https://filecoin.io/filecoin.pdf)
* [https://www.bittorrent.com/btt/btt-docs/BitTorrent_(BTT)_White_Paper_v0.8.7_Feb_2019.pdf](https://www.bittorrent.com/btt/btt-docs/BitTorrent_(BTT)_White_Paper_v0.8.7_Feb_2019.pdf)
* [https://docs.makerdao.com/smart-contract-modules/governance-module](https://docs.makerdao.com/smart-contract-modules/governance-module)
* [https://www.statista.com/statistics/267184/content-delivery-network-internet-traffic-worldwide/](https://www.statista.com/statistics/267184/content-delivery-network-internet-traffic-worldwide/)
* [https://www.t4.ai/industry/cdn-market-share](https://www.t4.ai/industry/cdn-market-share)
* [https://www1.hkexnews.hk/app/sehk/2020/102806/documents/sehk20110501767.pdf](https://www1.hkexnews.hk/app/sehk/2020/102806/documents/sehk20110501767.pdf)
